#! /usr/bin/bash

source ./createFunc
source ./useFunc
source ./renameDatabaseFunc
source ./dropDatabaseFunc
source ./listDatabasesFunc
source ./dropTableFunc
source ./insertIntoFunc

shopt -s extglob

declare -i exit=0
until [[ $exit -eq 1 ]]
do 
    read -p "> " input
    eval "set -- $input"
    case $1 in
    +([Ee][Xx][Ii][Tt]))
        exit
        ;;
    +([cC][rR][eE][aA][tT][eE]))
        createFunc ${@:2}
        ;;
    +([uU][sS][eE]))
        useFuncSQL ${@:2}
        ;;
    +([dD][rR][oO][pP]))
        if [[ ${2} =~ ^[dD][aA][tT][aA][bB][aA][sS][eE]$ ]]
        then
            echo ${2}
            dropDatabaseFuncSQL ${@:2}
        elif [[ ${2} =~ ^[tT][aA][bB][lL][eE]$ ]]
        then
            if [[ $databaseInUse != "" ]]
            then
                dropTableFuncSQL ${@:2} $databaseInUse
            else
                echo Please select a database first.
            fi
        else 
            echo Invalid Syntax.
        fi
        ;;
    +([rR][eE][nN][aA][mM][eE]))
        renameDatabaseFuncSQL ${@:2}
        ;;
    +([sS][hH][oO][wW]))
        listDatabasesFuncSQL ${@:2}
        ;;
    +([Ii][Nn][Ss][Ee][Rr][Tt]))
        insertIntoFunc ${@:2}
        ;;
    *)
        echo Invalid Syntax
    esac
done

# #echo $databaseInUse