#! /usr/bin/bash

source ./createFunc
source ./useFunc
source ./renameDatabaseFunc
source ./dropDatabaseFunc
source ./listDatabasesFunc
source ./dropTableFunc
source ./insertIntoFunc

shopt -s extglob

declare -i exit=0
until [[ $exit -eq 1 ]]
do 
    read -p "> " -a input
    case ${input[0]} in
    +([Ee][Xx][Ii][Tt]))
        exit
        ;;
    +([cC][rR][eE][aA][tT][eE]))
        createFunc ${input[@]:1}
        ;;
    +([uU][sS][eE]))
        useFuncSQL ${input[@]:1}
        ;;
    +([dD][rR][oO][pP]))
        if [[ ${input[1]} =~ ^[dD][aA][tT][aA][bB][aA][sS][eE]$ ]]
        then
            echo ${input[1]}
            dropDatabaseFuncSQL ${input[@]:1}
        elif [[ ${input[1]} =~ ^[tT][aA][bB][lL][eE]$ ]]
        then
            if [[ $databaseInUse != "" ]]
            then
                dropTableFuncSQL ${input[@]:1} $databaseInUse
            else
                echo Please select a database first.
            fi
        else 
            echo Invalid Syntax.
        fi
        ;;
    +([rR][eE][nN][aA][mM][eE]))
        renameDatabaseFuncSQL ${input[@]:1}
        ;;
    +([sS][hH][oO][wW]))
        listDatabasesFuncSQL ${input[@]:1}
        ;;
    +([Ii][Nn][Ss][Ee][Rr][Tt]))
        insertIntoFunc ${input[@]:1}
        ;;
    *)
        echo Invalid Syntax
    esac
done

#echo $databaseInUse